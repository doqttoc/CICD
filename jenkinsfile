pipeline{
    agent any
    tools {nodejs "node_12_4_0"}
    stages{
        stage('Build'){
            steps{
                echo "hello world"
                echo "1111"
                echo "docker --version"
                echo "hello jenkins"
                sh '''
                docker --version
                node --version
                npm --version
                npm config set registry https://registry.npm.taobao.org
                npm install
                npm run build
                docker build -t pipeline-222 .
                docker image ls
                '''
            }
        }
        stage('RUN'){
            steps{
                echo "start run docker container"
                sh '''
                    docker run --name pipeline-222 -d -p 8022:80 pipeline-222
                    docker container ls
                    docker ps
                '''
            }
        }
    }
    
}